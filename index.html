<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CFclaude - AI 编程助手配置管理</title>
  <link rel="stylesheet" href="styles.css">
  <!-- highlight.js 代码高亮 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
  <div class="app-layout">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1>CFclaude</h1>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-section">
          <div class="nav-title">配置</div>
          <button class="sidebar-btn active" data-view="config">模型配置</button>
          <button class="sidebar-btn recommended-btn" data-view="recommended-gateway">推荐网关</button>
        </div>
        <div class="nav-section">
          <div class="nav-title">工具</div>
          <button class="sidebar-btn cfclaude-cli-btn" data-view="cfclaude-cli">CFclaude CLI</button>
          <button class="sidebar-btn" data-view="install-claude">安装 Claude Code</button>
          <button class="sidebar-btn" data-view="install-qwen">安装 Qwen Code</button>
          <button class="sidebar-btn" data-view="install-node">下载 Node.js</button>
        </div>
        <div class="nav-section">
          <div class="nav-title">获取 API Key</div>
          <button class="sidebar-btn" data-view="api-deepseek">DeepSeek</button>
          <button class="sidebar-btn" data-view="api-doubao">豆包</button>
          <button class="sidebar-btn" data-view="api-kimi">Kimi</button>
          <button class="sidebar-btn" data-view="api-qwen">通义千问</button>
          <button class="sidebar-btn" data-view="api-zhipu">智谱AI</button>
          <button class="sidebar-btn" data-view="api-modelscope">ModelScope</button>
          <button class="sidebar-btn" data-view="api-nvidia">NVIDIA NIM</button>
          <button class="sidebar-btn" data-view="api-cloudflare">Cloudflare</button>
          <button class="sidebar-btn" data-view="api-anthropic">Anthropic</button>
        </div>
      </nav>
      <div class="sidebar-footer">
        <span class="version">v1.2.0</span>
      </div>
    </aside>

    <main class="main-content">
      <!-- 模型配置视图 -->
      <div id="view-config" class="view active">
        <header class="main-header">
          <h2>AI 编程助手配置</h2>
          <p class="subtitle">一键切换 Claude Code / Qwen Code 后端服务商</p>
        </header>

        <div class="content-grid">
          <section class="card status-card">
            <h3>当前配置</h3>
            <div class="status-list">
              <div class="status-row">
                <span class="status-label">服务商</span>
                <span id="current-provider" class="status-value">-</span>
              </div>
              <div class="status-row">
                <span class="status-label">模型</span>
                <span id="current-model" class="status-value">-</span>
              </div>
            </div>
          </section>

          <section class="card gateway-card">
            <h3>自定义网关</h3>
            <input type="text" id="unified-gateway" class="input-field" placeholder="留空使用服务商默认地址">
          </section>
        </div>

        <section class="provider-section">
          <h3>选择服务商</h3>
          <div class="provider-grid">
            <button class="provider-btn recommended" data-provider="recommended">推荐网关</button>
            <button class="provider-btn" data-provider="deepseek">DeepSeek</button>
            <button class="provider-btn" data-provider="doubao">豆包</button>
            <button class="provider-btn" data-provider="kimi">Kimi</button>
            <button class="provider-btn" data-provider="qwen">通义千问</button>
            <button class="provider-btn" data-provider="zhipu">智谱AI</button>
            <button class="provider-btn" data-provider="modelscope">ModelScope</button>
            <button class="provider-btn nvidia" data-provider="nvidia">NVIDIA NIM</button>
            <button class="provider-btn" data-provider="cloudflare">Cloudflare</button>
            <button class="provider-btn" data-provider="anthropic">Anthropic</button>
          </div>
        </section>

        <section id="config-section" class="config-section" style="display: none;">
          <div class="config-grid">
            <div id="auth-mode-group" class="form-group" style="display: none;">
              <label>认证方式</label>
              <select id="auth-mode-select" class="input-field"></select>
            </div>
            <div class="form-group">
              <label>选择模型</label>
              <select id="model-select" class="input-field"></select>
            </div>
            <div id="custom-model-group" class="form-group" style="display: none;">
              <label>自定义模型 ID</label>
              <input type="text" id="custom-model" class="input-field" placeholder="输入你开通的模型 ID">
            </div>
            <div id="api-key-group" class="form-group">
              <label>API Key</label>
              <input type="password" id="api-key" class="input-field" placeholder="输入 API Key">
            </div>
            <div id="cloudflare-config" class="form-group" style="display: none;">
              <label>Worker URL</label>
              <input type="text" id="cf-worker-url" class="input-field" placeholder="https://your-worker.workers.dev">
            </div>
          </div>
          
          <!-- 启动目录选择 -->
          <div class="form-group" id="workdir-group">
            <label>启动目录</label>
            <div class="workdir-row">
              <input type="text" id="workdir-path" class="input-field" placeholder="选择或输入工作目录路径">
              <button id="workdir-btn" class="btn-icon-text" title="选择文件夹">选择</button>
            </div>
          </div>
          
          <div class="action-buttons">
            <button id="apply-btn" class="btn-primary">应用配置</button>
            <button id="clear-btn" class="btn-secondary">清除配置</button>
          </div>
        </section>

        <div id="message" class="message"></div>
      </div>

      <!-- 推荐网关视图 -->
      <div id="view-recommended-gateway" class="view">
        <header class="main-header compact">
          <h2>Sub2API 网关</h2>
        </header>
        
        <!-- 网关模式选择 -->
        <div class="gateway-mode-bar">
          <label class="mode-tab active" id="mode-builtin-card">
            <input type="radio" name="gateway-mode" value="builtin" id="mode-builtin" checked>
            <span>内置网关</span>
          </label>
          <label class="mode-tab" id="mode-custom-card">
            <input type="radio" name="gateway-mode" value="custom" id="mode-custom">
            <span>自建网关</span>
          </label>
        </div>
        
        <!-- 内置网关配置 -->
        <div id="builtin-config" class="info-card-compact recommended-border">
          <div class="config-row">
            <span class="config-label">网关地址</span>
            <span class="config-value" id="recommended-url">https://********.****/********</span>
          </div>
          <div class="config-row">
            <span class="config-label">API Key</span>
            <span class="config-value masked" id="recommended-key-display">********************************</span>
          </div>
          <div id="key-availability-status" class="key-status-bar available">可用: 6/6</div>
        </div>
        
        <!-- 自建网关配置 -->
        <div id="custom-config" class="info-card-compact" style="display: none;">
          <div class="form-group-compact">
            <label>网关地址</label>
            <input type="text" id="custom-gateway-url" class="input-field" placeholder="https://your-sub2api.com/v1">
          </div>
          <div class="form-group-compact">
            <label>API Key</label>
            <input type="password" id="custom-gateway-key" class="input-field" placeholder="输入 API Key">
          </div>
          <p class="link-hint">Sub2API: <a href="https://github.com/AIPro-ltd/sub2api" target="_blank">github.com/AIPro-ltd/sub2api</a></p>
        </div>
        
        <!-- 启动配置 -->
        <div class="launch-row">
          <div class="launch-item">
            <label>模型</label>
            <select id="recommended-model-select" class="input-field">
              <option value="claude-sonnet-4-5-20250514">Claude Sonnet 4.5</option>
              <option value="claude-opus-4-5-20250514">Claude Opus 4.5</option>
              <option value="claude-haiku-4-5-20250514">Claude Haiku 4.5</option>
            </select>
          </div>
          <div class="launch-item">
            <label>启动目录</label>
            <div class="workdir-row">
              <input type="text" id="recommended-workdir" class="input-field" placeholder="选择工作目录">
              <button id="recommended-workdir-btn" class="btn-icon-text">选择</button>
            </div>
          </div>
        </div>
        
        <button id="apply-recommended-btn" class="btn-primary" style="margin-top: 12px;">启动 Claude Code</button>
        <div id="recommended-message" class="message"></div>
      </div>

      <!-- CFclaude CLI 视图 -->
      <div id="view-cfclaude-cli" class="view">
        <header class="main-header">
          <h2>CFclaude CLI</h2>
          <p class="subtitle">多服务商终端 AI 编程助手</p>
        </header>
        
        <div class="info-card">
          <h3>选择模型</h3>
          <div class="form-group">
            <label>模型</label>
            <select id="cli-model-select" class="input-field">
            </select>
          </div>
          <div class="form-group">
            <label>自定义模型（当前服务商）</label>
            <div class="workdir-row">
              <input type="text" id="cli-custom-model-id" class="input-field" placeholder="输入模型 ID，例如 glm-4-air">
              <button id="cli-add-model-btn" class="btn-secondary">添加</button>
            </div>
            <input type="text" id="cli-custom-model-name" class="input-field" placeholder="可选：显示名称，不填则使用模型 ID">
          </div>
          <div class="form-group">
            <label id="cli-provider-label">API Key</label>
            <input type="password" id="cli-api-key" class="input-field" placeholder="输入 API Key">
          </div>
          <div class="form-group">
            <label>启动目录</label>
            <div class="workdir-row">
              <input type="text" id="cli-workdir" class="input-field" placeholder="选择工作目录">
              <button id="cli-workdir-btn" class="btn-icon-text">选择</button>
            </div>
          </div>
          <button id="cli-launch-btn" class="btn-primary btn-large">启动 CFclaude CLI</button>
        </div>
        
        <div id="cli-message" class="message"></div>
      </div>

      <!-- 安装 Claude Code 视图 -->
      <div id="view-install-claude" class="view">
        <header class="main-header">
          <h2>安装 Claude Code</h2>
          <p class="subtitle">Anthropic 官方 AI 编程助手 CLI 工具</p>
        </header>
        <div class="info-card">
          <h3>安装说明</h3>
          <p>Claude Code 是 Anthropic 官方推出的命令行 AI 编程助手。</p>
          <p>安装命令：<code>npm install -g @anthropic-ai/claude-code</code></p>
          <p>安装前请确保已安装 Node.js 18 或更高版本。</p>
        </div>
        <button id="install-claude-btn" class="btn-primary btn-large">开始安装</button>
        <div id="install-message" class="message"></div>
      </div>

      <!-- 安装 Qwen Code 视图 -->
      <div id="view-install-qwen" class="view">
        <header class="main-header">
          <h2>安装 Qwen Code</h2>
          <p class="subtitle">阿里云百炼 AI 编程助手，每天 2000 次免费调用</p>
        </header>
        <div class="info-card">
          <h3>Qwen Code 介绍</h3>
          <p>Qwen Code 是阿里云百炼推出的命令行 AI 编程工具，专为 <strong>Qwen3-Coder</strong> 模型优化。</p>
          <p>安装命令：<code>npm install -g @qwen-code/qwen-code@latest</code></p>
          <p>启动命令：<code>qwen</code></p>
          <p class="hint" style="margin-top: 16px;">Qwen Code 提供每天 2000 次免费 API 调用额度！</p>
        </div>
        <div class="info-card" style="margin-top: 16px;">
          <h3>配置 Qwen Code</h3>
          <div class="form-group">
            <label>百炼 API Key</label>
            <input type="password" id="qwen-api-key" class="input-field" placeholder="输入阿里云百炼 API Key">
          </div>
          <div class="form-group">
            <label>选择模型</label>
            <select id="qwen-model-select" class="input-field">
              <option value="qwen3-coder-plus">Qwen3 Coder Plus (推荐)</option>
              <option value="qwen3-coder">Qwen3 Coder</option>
              <option value="qwen-max">Qwen Max</option>
              <option value="qwen-plus">Qwen Plus</option>
              <option value="qwen-turbo">Qwen Turbo</option>
            </select>
          </div>
          <div class="form-group">
            <label>地域</label>
            <select id="qwen-region-select" class="input-field">
              <option value="https://dashscope.aliyuncs.com/compatible-mode/v1">北京 (推荐)</option>
              <option value="https://dashscope-intl.aliyuncs.com/compatible-mode/v1">新加坡</option>
              <option value="https://dashscope-us.aliyuncs.com/compatible-mode/v1">弗吉尼亚</option>
            </select>
          </div>
        </div>
        <div class="button-row" style="margin-top: 20px;">
          <button id="install-qwen-btn" class="btn-primary btn-large">安装 Qwen Code</button>
          <button id="config-qwen-btn" class="btn-secondary btn-large">应用配置</button>
        </div>
        <button class="btn-secondary btn-large" style="margin-top: 12px;" data-url="https://help.aliyun.com/zh/model-studio/qwen-code">查看官方文档</button>
        <div id="qwen-message" class="message"></div>
      </div>

      <!-- 下载 Node.js 视图 -->
      <div id="view-install-node" class="view">
        <header class="main-header">
          <h2>下载 Node.js</h2>
          <p class="subtitle">安装 Node.js 运行环境</p>
        </header>
        <div class="info-card">
          <h3>安装说明</h3>
          <p>Node.js 是运行 Claude Code / Qwen Code 的必要环境。</p>
          <p>推荐版本：v24.13.0 (LTS)</p>
          <p>点击下方按钮将下载 Windows x64 安装包。</p>
        </div>
        <button id="download-node-btn" class="btn-primary btn-large">下载 Node.js</button>
      </div>

      <!-- API 信息视图模板 -->
      <div id="view-api-deepseek" class="view">
        <header class="main-header">
          <h2>DeepSeek</h2>
          <p class="subtitle">国产首选，编程能力强，原生支持 Anthropic API</p>
        </header>
        <div class="info-card">
          <h3>平台信息</h3>
          <p>DeepSeek 是国内领先的 AI 模型提供商，<strong>原生兼容 Claude Code</strong>。</p>
          <p>推荐模型：deepseek-chat（通用）、deepseek-reasoner（深度推理）</p>
          <p>API 地址：api.deepseek.com/anthropic</p>
          <p class="hint">注意：DeepSeek 只有 deepseek-chat 一个模型可用于 Claude Code，不支持的模型名会自动映射到 deepseek-chat。</p>
        </div>
        <button class="btn-primary btn-large" data-url="https://platform.deepseek.com/">前往获取 API Key</button>
      </div>

      <div id="view-api-doubao" class="view">
        <header class="main-header">
          <h2>豆包</h2>
          <p class="subtitle">字节跳动，视觉理解，性价比高</p>
        </header>
        <div class="info-card">
          <h3>平台信息</h3>
          <p>豆包是字节跳动推出的 AI 模型，原生兼容 Claude Code。</p>
          <p>推荐模型：doubao-seed-code</p>
          <p>API 地址：ark.cn-beijing.volces.com</p>
        </div>
        <button class="btn-primary btn-large" data-url="https://console.volcengine.com/ark/">前往获取 API Key</button>
      </div>

      <div id="view-api-kimi" class="view">
        <header class="main-header">
          <h2>Kimi</h2>
          <p class="subtitle">月之暗面，超长上下文 128K</p>
        </header>
        <div class="info-card">
          <h3>平台信息</h3>
          <p>Kimi 由月之暗面开发，支持超长上下文。</p>
          <p>推荐模型：kimi-k2</p>
          <p>API 地址：api.moonshot.cn</p>
        </div>
        <button class="btn-primary btn-large" data-url="https://platform.moonshot.cn/">前往获取 API Key</button>
      </div>

      <div id="view-api-qwen" class="view">
        <header class="main-header">
          <h2>通义千问</h2>
          <p class="subtitle">阿里云百炼 Qwen Code，支持 OAuth 免费额度 / API Key</p>
        </header>
        <div class="info-card">
          <h3>平台信息</h3>
          <p>通义千问是阿里云推出的大语言模型，<strong>Qwen3-Coder</strong> 专为编程优化。</p>
          <p>推荐模型：qwen3-coder-plus</p>
          <p>API 地址：dashscope.aliyuncs.com</p>
        </div>
        <div class="info-card" style="margin-top: 16px; border-color: #c8ff00;">
          <h3 style="color: #c8ff00;">两种认证方式</h3>
          <p><strong>OAuth 认证（推荐）</strong></p>
          <p style="color: #c8ff00;">• 每天 2000 次免费调用额度</p>
          <p style="color: #c8ff00;">• 无需 API Key，扫码登录即可</p>
          <p style="margin-top: 12px;"><strong>OpenAI 兼容认证</strong></p>
          <p>• 需要百炼 API Key</p>
          <p>• 可自由选择模型</p>
        </div>
        <button class="btn-primary btn-large" data-url="https://dashscope.console.aliyun.com/">前往获取 API Key</button>
      </div>

      <div id="view-api-zhipu" class="view">
        <header class="main-header">
          <h2>智谱AI</h2>
          <p class="subtitle">稳定可靠，中文优化</p>
        </header>
        <div class="info-card">
          <h3>平台信息</h3>
          <p>智谱AI 提供 GLM 系列模型，中文表现优秀。</p>
          <p>推荐模型：glm-4.7</p>
          <p>API 地址：open.bigmodel.cn</p>
        </div>
        <button class="btn-primary btn-large" data-url="https://open.bigmodel.cn/">前往获取 API Key</button>
      </div>

      <div id="view-api-modelscope" class="view">
        <header class="main-header">
          <h2>ModelScope</h2>
          <p class="subtitle">魔搭社区开源模型推理，使用 Qwen Code</p>
        </header>
        <div class="info-card">
          <h3>平台信息</h3>
          <p>ModelScope 是阿里巴巴的开源模型社区，提供 OpenAI 兼容 API。</p>
          <p>推荐模型：Qwen2.5-Coder-32B</p>
          <p>API 地址：api-inference.modelscope.cn</p>
        </div>
        <div class="info-card" style="margin-top: 16px; border-color: #c8ff00;">
          <h3 style="color: #c8ff00;">使用 Qwen Code</h3>
          <p>ModelScope 使用 OpenAI 兼容 API，配置后将自动启动 <strong>Qwen Code</strong>。</p>
          <p style="margin-top: 8px;">如未安装 Qwen Code，请先前往「安装 Qwen Code」页面安装。</p>
        </div>
        <button class="btn-primary btn-large" style="margin-top: 20px;" data-url="https://modelscope.cn/my/myaccesstoken">获取 API Key</button>
      </div>

      <div id="view-api-nvidia" class="view">
        <header class="main-header">
          <h2>NVIDIA NIM</h2>
          <p class="subtitle">NVIDIA 云端推理服务，支持多种开源模型</p>
        </header>
        <div class="info-card">
          <h3>平台信息</h3>
          <p>NVIDIA NIM 提供企业级云端模型推理服务，使用 OpenAI 兼容 API。</p>
          <p>推荐模型：GLM 4.7、MiniMax M2.1、DeepSeek R1</p>
          <p>API 地址：integrate.api.nvidia.com</p>
        </div>
        <div class="info-card" style="margin-top: 16px;">
          <h3>可用模型</h3>
          <ul style="margin: 8px 0; padding-left: 20px; color: #888;">
            <li>z-ai/glm4.7 - 智谱 GLM (推荐)</li>
            <li>minimaxai/minimax-m2.1 - MiniMax</li>
            <li>deepseek-ai/deepseek-r1 - 推理模型</li>
            <li>meta/llama-4-maverick - Llama 4</li>
          </ul>
        </div>
        <div class="info-card" style="margin-top: 16px; border-color: #76b900;">
          <h3 style="color: #76b900;">使用 Qwen Code</h3>
          <p>NVIDIA NIM 使用 OpenAI 兼容 API，配置后将自动启动 <strong>Qwen Code</strong>。</p>
          <p style="margin-top: 8px;">如未安装 Qwen Code，请先前往「安装 Qwen Code」页面安装。</p>
        </div>
        <button class="btn-primary btn-large" style="margin-top: 20px; background: #76b900; border-color: #76b900;" data-url="https://build.nvidia.com/explore/discover">获取 API Key</button>
      </div>

      <div id="view-api-cloudflare" class="view">
        <header class="main-header">
          <h2>Cloudflare</h2>
          <p class="subtitle">完全免费，需部署 Worker</p>
        </header>
        <div class="info-card">
          <h3>部署配置</h3>
          <div class="form-row">
            <div class="form-group">
              <label>Account ID</label>
              <input type="text" id="cf-account-id" class="input-field" placeholder="输入 Account ID">
            </div>
            <div class="form-group">
              <label>API Token</label>
              <input type="password" id="cf-api-token" class="input-field" placeholder="输入 API Token">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Worker 名称</label>
              <input type="text" id="cf-worker-name" class="input-field" value="claude-ai-proxy" placeholder="Worker 名称">
            </div>
            <div class="form-group">
              <label>子域 (subdomain)</label>
              <input type="text" id="cf-subdomain" class="input-field" value="violetqqcom" placeholder="你的子域">
            </div>
          </div>
          <p class="hint">部署后 Worker URL: https://[worker名称].[子域].workers.dev</p>
        </div>
        <div class="button-row">
          <button id="deploy-worker-btn" class="btn-primary btn-large">一键部署 Worker</button>
          <button class="btn-secondary btn-large" data-url="https://dash.cloudflare.com/">手动部署</button>
        </div>
        <div id="cf-deploy-status" class="deploy-status" style="display: none;"></div>
        <div id="cf-url-display" class="url-display" style="display: none;">
          <label>Worker URL (点击复制)</label>
          <input type="text" id="cf-deployed-url" class="url-input" readonly>
        </div>
      </div>

      <div id="view-api-anthropic" class="view">
        <header class="main-header">
          <h2>Anthropic</h2>
          <p class="subtitle">官方 Claude API</p>
        </header>
        <div class="info-card">
          <h3>平台信息</h3>
          <p>Anthropic 官方 API，提供最佳的 Claude 体验。</p>
          <p>推荐模型：claude-sonnet-4、claude-opus-4</p>
          <p>需要有效订阅或 API 额度。</p>
        </div>
        <button class="btn-primary btn-large" data-url="https://console.anthropic.com/">前往获取 API Key</button>
      </div>
    </main>

    <!-- 右侧监控面板 -->
    <aside class="monitor-sidebar">
      <!-- 运行状态 -->
      <div class="monitor-section">
        <div class="monitor-header">
          <h3>运行状态</h3>
          <span id="status-indicator" class="status-dot idle" title="空闲"></span>
        </div>
        <div class="status-info">
          <div class="status-row-mini">
            <span>CLI 工具</span>
            <span id="monitor-cli">-</span>
          </div>
          <div class="status-row-mini">
            <span>工作目录</span>
            <span id="monitor-workdir" title="">-</span>
          </div>
          <div class="status-row-mini">
            <span>监控状态</span>
            <span id="monitor-status">未启动</span>
          </div>
        </div>
        <div class="monitor-actions">
          <button id="start-monitor-btn" class="btn-small">开始监控</button>
          <button id="stop-monitor-btn" class="btn-small" disabled>停止监控</button>
        </div>
      </div>
      
      <!-- 文件列表 -->
      <div class="monitor-section files-section">
        <div class="monitor-header">
          <h3>文件列表</h3>
          <button id="refresh-files-btn" class="btn-icon" title="刷新">↻</button>
        </div>
        <div id="file-list" class="file-list">
          <p class="empty-hint">选择工作目录后显示</p>
        </div>
      </div>
      
      <!-- 文件操作日志 -->
      <div class="monitor-section log-section">
        <div class="monitor-header">
          <h3>操作日志</h3>
          <button id="clear-log-btn" class="btn-icon" title="清空">×</button>
        </div>
        <div id="operation-log" class="operation-log">
          <p class="empty-hint">等待文件操作...</p>
        </div>
      </div>
      
      <!-- 文件详情面板 -->
      <div id="file-detail-panel" class="file-detail-panel" style="display: none;">
        <div class="detail-panel-header">
          <span id="detail-filename">文件详情</span>
          <button id="close-detail-btn" class="btn-icon">×</button>
        </div>
        <div class="detail-panel-info">
          <div class="detail-row-mini">
            <span>操作</span>
            <span id="detail-action">-</span>
          </div>
          <div class="detail-row-mini">
            <span>时间</span>
            <span id="detail-time">-</span>
          </div>
          <div class="detail-row-mini">
            <span>路径</span>
            <span id="detail-path" title="">-</span>
          </div>
        </div>
        <div class="detail-panel-actions">
          <button id="detail-preview" class="btn-small btn-highlight">预览代码</button>
          <button id="detail-open-folder" class="btn-small">打开目录</button>
          <button id="detail-open-file" class="btn-small">打开文件</button>
        </div>
      </div>
      
      <!-- 历史配置按钮 -->
      <div class="monitor-section">
        <button id="show-history-btn" class="btn-history">历史配置</button>
      </div>
    </aside>
  </div>

  <!-- 历史配置模态框 -->
  <div id="history-modal" class="modal">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h3>历史配置</h3>
        <button id="close-history-btn" class="btn-icon" title="关闭">×</button>
      </div>
      <div id="history-list" class="history-list-modal">
        <p class="history-empty">暂无历史配置</p>
      </div>
      <div class="modal-actions">
        <button id="clear-history-btn" class="btn-secondary">清空历史</button>
      </div>
    </div>
  </div>

  <!-- 确认模态框 -->
  <div id="confirm-modal" class="modal">
    <div class="modal-content">
      <h3>切换配置</h3>
      <p id="modal-message">确定要切换到此配置吗？</p>
      <div class="modal-details" id="modal-details"></div>
      <div class="modal-actions">
        <button id="modal-cancel" class="btn-secondary">取消</button>
        <button id="modal-confirm" class="btn-primary">确认切换</button>
      </div>
    </div>
  </div>

  <!-- 文件预览模态框 -->
  <div id="preview-modal" class="modal">
    <div class="modal-content modal-preview">
      <div class="modal-header">
        <h3 id="preview-title">文件预览</h3>
        <button id="close-preview-btn" class="btn-icon">×</button>
      </div>
      <div class="preview-info">
        <span id="preview-path" class="preview-path">-</span>
        <span id="preview-size" class="preview-size">-</span>
      </div>
      <div class="preview-code-wrapper">
        <pre><code id="preview-code" class="hljs"></code></pre>
      </div>
      <div class="modal-actions">
        <button id="preview-restore" class="btn-restore" title="将文件恢复到此快照状态">回溯到此版本</button>
        <button id="preview-open-folder" class="btn-secondary">打开目录</button>
        <button id="preview-open-file" class="btn-primary">打开文件</button>
      </div>
    </div>
  </div>

  <!-- 回溯确认模态框 -->
  <div id="restore-confirm-modal" class="modal">
    <div class="modal-content modal-confirm">
      <div class="modal-header">
        <h3>确认回溯</h3>
        <button id="close-restore-confirm" class="btn-icon">×</button>
      </div>
      <div class="restore-confirm-body">
        <div class="restore-warning">
          <span class="warning-icon">⚠</span>
          <p>此操作将用快照内容覆盖当前文件，无法撤销！</p>
        </div>
        <div class="restore-info">
          <div class="restore-row">
            <span>文件</span>
            <span id="restore-filename">-</span>
          </div>
          <div class="restore-row">
            <span>快照时间</span>
            <span id="restore-time">-</span>
          </div>
          <div class="restore-row">
            <span>快照操作</span>
            <span id="restore-action">-</span>
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button id="cancel-restore" class="btn-secondary">取消</button>
        <button id="confirm-restore" class="btn-danger">确认回溯</button>
      </div>
    </div>
  </div>

  <!-- 加载遮罩 -->
  <div id="loading-overlay" class="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <p id="loading-text">处理中...</p>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>

